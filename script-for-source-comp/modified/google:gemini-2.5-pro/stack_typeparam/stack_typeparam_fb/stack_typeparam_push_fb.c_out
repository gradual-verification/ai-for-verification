struct node
{
void* data;
struct node* next;
};
struct stack
{
struct node* first;
destructor* destructor;
int size;
};
struct data
{
int foo;
int bar;
};
typedef void destructor(void* data);
void push(struct stack* stack, void* data)
{
struct node* node = malloc( sizeof( struct node ) );
if ( node == 0 ) abort();
node->data = data;
node->next = first;
stack->first = node;
if (stack->size == INT_MAX) {
abort();
}
stack->size++;
}