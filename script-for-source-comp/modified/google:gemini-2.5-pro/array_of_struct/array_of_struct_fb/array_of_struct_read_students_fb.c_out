struct student {
char name[100];
int age;
};
struct point {
int x;
int y;
};
struct student *read_students(int *count)
{
printf("How many students?\n");
scanf(" %d", count);
if (*count < 0 || SIZE_MAX / sizeof(struct student) < (size_t)*count) abort();
int nb = *count;
struct student *result = malloc(nb * sizeof(struct student));
if (result == 0) abort();
for (int i = 0; i < nb; i++)
{
printf("Please enter the name of student %d:\n", i);
if (scanf(" %99s", &result[i].name) != 1) abort();
printf("Please enter the age of student %d:\n", i);
scanf(" %d", &result[i].age);
}
return result;
}
