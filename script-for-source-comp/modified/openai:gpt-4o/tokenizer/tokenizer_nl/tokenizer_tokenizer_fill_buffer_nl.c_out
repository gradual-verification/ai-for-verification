typedef int charreader();
struct tokenizer
{
charreader*           next_char;
int                   lastread;
int                   lasttoken;
struct string_buffer* buffer;
};
void tokenizer_fill_buffer(struct tokenizer* tokenizer)
{
if (tokenizer->lastread == -2)
{
charreader *reader = tokenizer->next_char;
int result = reader();
if (result < -128 || result > 127)
abort();
tokenizer->lastread = result;
}
}
