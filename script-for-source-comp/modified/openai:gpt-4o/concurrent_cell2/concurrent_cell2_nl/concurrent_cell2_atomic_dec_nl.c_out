void atomic_dec(int* c);
void atomic_dec(int* c) {
while (true)
{
int old = *c;
if (old > 0) {
if (__sync_bool_compare_and_swap(c, old, old - 1)) {
return;
}
} else {
return;
}
}
}
