struct node {
void* value;
struct node* next;
};
typedef bool equals(void* v1, void* v2);
struct node* create_list()
{
return 0;
}
struct node* add(struct node* n, void* v)
{
struct node* nn = malloc(sizeof(struct node));
if(nn == 0) abort();
nn->value = v;
nn->next = n;
return nn;
}
bool list_contains(struct node* n, void* v, equals* eq)
{
if(n == 0) {
return false;
} else {
bool cont = eq(v, n->value);
if(cont) {
return true;
} else {
bool result = list_contains(n->next, v, eq);
return result;
}
}
}
bool my_equals(void* v1, void* v2)
{
return (uintptr_t)v1 == (uintptr_t)v2;
}
void test_contains()
{
struct node* n = create_list();
n = add(n, (void*) 1);
n = add(n, (void*) 2);
n = add(n, (void*) 3);
bool cont = list_contains(n, (void*) 2, my_equals);
assert(cont == true);
}