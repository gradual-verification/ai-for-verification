struct tokenizer
{
charreader*           next_char;
int                   lastread;
int                   lasttoken;
struct string_buffer* buffer;
};
typedef int charreader();
struct string_buffer *tokenizer_get_buffer(struct tokenizer *tokenizer)
{
struct string_buffer *result = tokenizer->buffer;
return result;
}