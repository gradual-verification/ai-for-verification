struct Counter {
int value;
};
struct Counter* init(int v)
{
struct Counter* c = malloc(sizeof(struct Counter));
if (c == 0) {
abort();
}
c->value = v;
return c;
}
void increment(struct Counter* c)
{
int tmp = c->value;
c->value = tmp + 1;
}
void decrement(struct Counter* c)
{
int tmp = c->value;
c->value = tmp - 1;
}
void dispose(struct Counter* c)
{
free(c);
}
void swap(struct Counter* c1, struct Counter* c2)
{
int tmp1 = c1->value;
int tmp2 = c2->value;
c2->value = tmp1;
c1->value = tmp2;
}
int get(struct Counter* c)
{
int tmp = c->value;
return tmp;
}
bool random();
int main2()
{
struct Counter* c = init(0);
bool b = random();
int n = 0;
while(b && n < INT_MAX)
{
increment(c);
n = n + 1;
b = random();
}
while(0<n)
{
decrement(c);
n = n - 1;
}
dispose(c);
return 0;
}